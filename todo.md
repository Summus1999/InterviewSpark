# InterviewSpark 待办事项清单

> 基于 Phase 7 规划更新，更新时间: 2024-12-23

---

## 优先级说明

- P0: 高优先级，影响核心体验
- P1: 中优先级，提升用户体验
- P2: 低优先级，扩展性预留

---

## Phase 7: AI 反馈质量体系、RAG 能力增强（当前重点）

### 模块 1: RAG 知识库管理（P0）

| 序号 | 功能                     | 状态 | 说明                                         |
|------|--------------------------|------|----------------------------------------------|
| 1.1  | knowledge_entries 表结构 | [ ]  | 新增表，存储知识条目内容、向量、来源 |
| 1.2  | 知识库 CRUD 函数 | [ ]  | Repository 实现后端查询、导入、删除 |
| 1.3  | list_knowledge_entries | [ ]  | 分页查询知识条目 |
| 1.4  | search_knowledge() | [ ]  | 语义搜索功能 |
| 1.5  | import_knowledge_from_file | [ ]  | 从 JSON/TXT 导入知识 |
| 1.6  | KnowledgeBaseView.vue | [ ]  | 知识库管理页面 |
| 1.7  | KnowledgeImport.vue | [ ]  | 知识导入组件 |
| 1.8  | RAG 检索可视化 | [ ]  | 展示检索的知识片段与相似度 |
| 1.9  | 知识库导航 | [ ]  | 在应用中添加知识库入口 |

### 模块 2: Prompt 工程优化（P0）

| 序号 | 功能                     | 状态 | 说明                                         |
|------|--------------------------|------|----------------------------------------------|
| 2.1  | 重构 analyze_answer Prompt | [ ]  | 输出结构化 JSON，包含 score/strengths/improvements |
| 2.2  | 强化面试官人设 Prompt    | [ ]  | 4 种人设详细描述（评估侧重/语气/措辞）        |
| 2.3  | 行业特化 Prompt          | [ ]  | 技术岗/产品岗/运营岗差异化评估维度      |

### 模块 3: 结构化反馈展示（P0）

| 序号 | 功能                    | 状态 | 说明                                    |
|------|-------------------------|------|-------------------------------------------| 
| 3.1  | FeedbackScore.vue       | [ ]  | 圆环图评分 + 等级徽章                       |
| 3.2  | FeedbackStrengths.vue   | [ ]  | 绿色卡片展示亮点，引用原文高亮             |
| 3.3  | FeedbackImprovements.vue| [ ]  | 橙色卡片，问题→原因→修改示例三段式      |
| 3.4  | JobMatchIndicator.vue   | [ ]  | 标签云展示岗位关键词 + 缺失要点提示    |
| 3.5  | 重构 FeedbackDisplay.vue | [ ]  | 集成新组件，解析 JSON 反馈           |

### 模块 4: 反馈一致性保障（P1）

| 序号 | 功能               | 状态 | 说明                               |
|------|----------------------|------|--------------------------------------|
| 4.1  | 评分校准机制         | [ ]  | AI 70% + 本地算法 30% 加权融合       |
| 4.2  | 格式验证机制         | [ ]  | 验证 JSON 结构、必填字段、评分范围    |
| 4.3  | 失败重试策略         | [ ]  | 格式异常自动重试，最多 2 次后降级     |

### 模块 5: 反馈进化机制（P1）

| 序号 | 功能             | 状态 | 说明                              |
|------|------------------|------|-------------------------------------|
| 5.1  | 反馈评价 UI       | [ ]  | 「有帮助/没帮助」评价按钮              |
| 5.2  | 评价数据存储       | [ ]  | 新增 feedback_ratings 表           |
| 5.3  | 评价统计查询       | [ ]  | 统计有帮助/没帮助比例               |

---

## 已完成功能

### Phase 6 已完成

| 序号 | 功能                     | 优先级 | 状态       |
|------|--------------------------|--------|------------|
| 1.1  | 首次使用引导(Onboarding) | P1     | ✅ 已完成 |
| 1.2  | 关键步骤提示气泡         | P2     | ✅ 已完成 |
| 1.3  | 计时模式               | P0     | ✅ 已完成 |
| 1.4  | AI 追问机制            | P0     | ✅ 已完成 |
| 1.5  | 预置模板系统           | P0     | ✅ 已完成 |
| 1.6  | AI 流式输出            | P0     | ✅ 已完成 |
| 1.7  | STAR 法则评分          | P1     | ✅ 已完成 |

---

## 其他待实施功能（低优先级）

### 语音增强（P2）

| 序号 | 功能           | 说明                           |
|------|----------------|--------------------------------|
| 5.1  | 高质量本地 TTS | Edge TTS API 集成               |
| 5.2  | 实时字幕显示   | 语音播放时同步显示文字           |

### 技术架构优化（P2）

| 序号 | 功能                  | 说明                                       |
|------|----------------------|----------------------------------------------|
| 6.1  | 数据库复合索引优化    | 添加 idx_answers_session_question 等索引     |
| 6.2  | 多 AI 模型 trait 抽象 | 定义 AIProvider trait，预留 OpenAI/Claude 适配 |
| 6.3  | 插件化架构            | ScoringRule trait + 配置文件加载             |

---

## 统计

| 分类            | 数量 |
|-----------------|------|
| Phase 7.1 RAG 管理 | 9    |
| Phase 7.2 Prompt | 3    |
| Phase 7.3 反馈展示 | 5    |
| Phase 7.4 一致性 | 3    |
| Phase 7.5 进化 | 3    |
| 已完成功能      | 7    |
| 低优先级待实施  | 5    |
| 总计            | 35   |

---

## 下一步建议

1. **高优先级** (两周内)
   - Phase 7.1: RAG 知识库管理（核心卖点）
   - Phase 7.2: Prompt 优化
   - Phase 7.3: 反馈结构化展示

2. 完成后進行用户测试，收集反馈评价数据

3. 基于评价数据迭代优化 Prompt 和评估算法
